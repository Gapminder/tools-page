//complementary mixins

// helper -> emits var(--token[, fallback])
css-var(name, fallback = null)
  if fallback == null
    unquote('var(--' + name + ')')
  else
    unquote('var(--' + name + ', ' + fallback + ')')

// emit defaults into :root
:root
  for name, fallback in themeTokens
    {unquote('--' + name)}: fallback
    
for name, fallback in themeTokens
  // dynamically assign $color-primary = css-var('color-primary', #990000), etc.
  // Stylus doesn't support dynamic variable names, so use a lookup hash instead:
  define('$' + name, css-var(name, fallback), true)


:root
  --header-height: $header-height-xlarge
  @media (max-width: $large-screen)
    --header-height: $header-height-large
  @media (max-width: $small-screen)
    --header-height: $header-height-small

media_queries = {
  small: "only screen and (max-width: $small-screen)",
  medium: "only screen and (min-width: $small-screen + 1) and (max-width: $large-screen - 1)",
  large: "only screen and (min-width: $large-screen)",
  xlarge: "only screen and (min-width: $xlarge-screen)",
  xxlarge: "only screen and (min-width: $xxlarge-screen)",
  xxxlarge: "only screen and (min-width: $xxxlarge-screen)",
  not-large: "only screen and (max-width: $large-screen - 1)",
  not-small: "only screen and (min-width: $small-screen + 1)"
}

for_breakpoint(breakpoints)
  conditions = ()
  for breakpoint in breakpoints
    push(conditions, media_queries[breakpoint])
  conditions = join(", ", conditions)
  @media conditions
    {block}



get-global-padding-left()
  @media (max-width: $small-screen)
    padding-left 10px
  @media (min-width: $large-screen)
    padding-left 20px
  padding-left 15px

get-global-padding-right()
  @media (max-width: $small-screen)
    padding-right 10px
  @media (min-width: $large-screen)
    padding-right 20px
  padding-right 15px

get-font-size(size)
  if size == small
    @media (max-width: $small-screen)
      font-size 12px
    @media (min-width: $large-screen)
      font-size 16px
    @media (min-width: $xlarge-screen)
      font-size 18px
    font-size 14px // medium
  else if size == medium
    @media (max-width: $small-screen)
      font-size 14px
    @media (min-width: $large-screen)
      font-size 18px
    @media (min-width: $xlarge-screen)
      font-size 20px
    font-size 16px // medium
  else if size == large
    @media (max-width: $small-screen)
      font-size 16px
    @media (min-width: $large-screen)
      font-size 20px
    @media (min-width: $xlarge-screen)
      font-size 22px
    font-size 18px // medium
  else if size == xlarge
    @media (max-width: $small-screen)
      font-size 22px
    @media (min-width: $large-screen)
      font-size 26px
    @media (min-width: $xlarge-screen)
      font-size 28px
    @media (min-width: $xxlarge-screen)
      font-size 30px
    @media (min-width: $xxxlarge-screen)
      font-size 32px
    font-size 24px // medium
  else 
    font-size 16px // medium default


dialog-box() 
  box-shadow 8px 16px 16px #00000040
  position relative
  background-color $color-background
  border 1px solid $color-primary
  border-radius 4px
  padding 10px

button()
  white-space nowrap
  text-wrap nowrap
  appearance none
  -webkit-appearance none
  -moz-appearance none
  color $color-primary
  background $color-background
  box-shadow inset 0 1px 10px $button-color
  cursor pointer
  border 1px solid $color-primary
  border-radius 4px
  padding 2px 10px
  &:hover
    box-shadow none
    background $color-primary
    color $color-background
    &:after
      color $color-background

button-box()
  cursor pointer
  background $color-primary
  margin 5px 0
  border-radius (4px)
  width 22px
  height 22px
  padding 0
  display flex;
  align-items center;
  justify-content center;
  path
    fill white

closecross()
  position absolute;
  cursor pointer;
  top 10px;
  right 10px;
  width 1.5em;
  height 1.5em;
  border-radius 999px
  text-align center
  line-height 1.5em
  font-weight bold
  &:hover
    text-decoration none;
    background-color $color-primary;
    color $color-background;

greyout()
  position fixed
  //display flex //set by caller
  justify-content center
  flex-direction column
  align-content center
  align-items center
  left 0
  top 0
  width 100%
  height 100%
  overflow auto
  background-color rgba(0,0,0,0.4)
  z-index 500

new-tab()
  content "âŽ‹";
  font-size 0.8em;
  margin 0 0.1em 0 0.2em;
  transform rotate(92deg);
  transform-origin center;
  display inline-block;
  opacity 0.7
  &:hover
    opacity 1
